{% extends "layout.html" %}

{% block content %}
<form id="edit_form" method="POST" action="/updateprojectinfo">

<div class="row">
    <div class="col-lg-12">
        <h1 class="text-center">Project Info</h1>
            <div id="table-holder" class="mx-auto">
                <table class="table table-nonfluid">
                    <tr>
                        <td>
                            Name:
                        </td>
                        <td>
                            {{ name }}
                            <input name="name" value="{{ name }}" hidden>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Description:
                        </td>
                        <td>
                            <textarea class="form-control" id="description" name="description" maxlength="588" onkeyup="editText()">{{ description }}</textarea>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Selection Prompt:
                        </td>
                        <td>
                            <input type="text" name="selection_prompt" class="info_input" value="{{ selection_prompt }}" onkeyup="editText()">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Preferred Prompt:
                        </td>
                        <td>
                            <input type="text" name="preferred_prompt" class="info_input" value="{{ preferred_prompt }}" onkeyup="editText()">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Unpreferred Prompt:
                        </td>
                        <td>
                            <input type="text" name="unpreferred_prompt" class="info_input" value="{{ unpreferred_prompt }}" onkeyup="editText()">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Consent Form:
                        </td>
                        <td>
                            <textarea class="form-control" id="consent_form" name="consent_form" maxlength="588" onkeyup="editText()">{{ consent_form }}</textarea>
                        </td>
                    </tr>
                </table>
                <div class="text-center">
                    <button type="button" class="btn btn-primary" id="submit_changes" onclick="submit_edit_form()" disabled>Submit Changes</button>
                </div>
            </div>

    </div>
</div>
<div class="row">
    <div class="col-lg-12">
        <!-- Include stylesheet -->
        <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

        <!-- Create the editor container -->
        <div id="consent_editor">
          <p>Copy and paste your consent page here.</p>
        </div>

        <!-- Include the Quill library -->
        <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

        <!-- Initialize Quill editor -->
        <script>
          var quill = new Quill('#consent_editor', {
            theme: 'snow'
          });
          function submit_edit_form() {
                form = document.getElementById('edit_form')
                // consent_editor = document.getElementById("consent_editor")
                document.getElementById('consent_page_input').value = quill.getText();
                form.submit()
            }
        </script>
    </div>
</div>
    <input type="hidden" id="consent_page_input" name="consent_page" value="">
        </form>

<script>

    function editText() {
        document.getElementById("submit_changes").disabled = false;
    }




</script>
{% endblock content %}
